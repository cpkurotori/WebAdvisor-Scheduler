<!DOCTYPE html>

<html>
<head>
<meta charset="utf-8">
<title>Schedule Builder</title>
<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
<!-- <link href="static/assets/css/main.css" rel="stylesheet"> --><!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
<!-- <link href="static/assets/css/bootstrap.css" rel="stylesheet" type="text/css">
	<link href="static/assets/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">
	<link href="static/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
	<link href="static/assets/css/bootstrap-theme.css" rel="stylesheet" type="text/css"> -->
<link href="../static/assets/css/main.css" rel="stylesheet">
<!-- <link href="../static/assets/css/bootstrap.css" rel="stylesheet" type="text/css"> -->
<!-- 	<link href="../static/assets/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css"> -->
<link href="../static/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<!-- <link href="../static/assets/css/bootstrap-theme.css" rel="stylesheet" type="text/css"> -->
</link></link></meta></head>
<body>
<div class="header">
<a href="http://www.ohlone.edu/" target="_blank"><img class="logo" src="http://www.ohlone.edu/org/collegeadvancement/downloads/ohlone50thannivlogo-horizontal.jpg"/></a>
</div>
<div class="row">
<div class="col-xs-6 col-sm-8 col-lg-10">
<div class="schedule">
<div class="times-container">
<table class="calendartimes">
<tr class="times">
<td class="times">6:00 am</td>
</tr>
<tr class="times">
<td class="times">7:00 am</td>
</tr>
<tr class="times">
<td class="times">8:00 am</td>
</tr>
<tr class="times">
<td class="times">9:00 am</td>
</tr>
<tr class="times">
<td class="times">10:00 am</td>
</tr>
<tr class="times">
<td class="times">11:00 am</td>
</tr>
<tr class="times">
<td class="times">12:00 pm</td>
</tr>
<tr class="times">
<td class="times">1:00 pm</td>
</tr>
<tr class="times">
<td class="times">2:00 pm</td>
</tr>
<tr class="times">
<td class="times">3:00 pm</td>
</tr>
<tr class="times">
<td class="times">4:00 pm</td>
</tr>
<tr class="times">
<td class="times">5:00 pm</td>
</tr>
<tr class="times">
<td class="times">6:00 pm</td>
</tr>
<tr class="times">
<td class="times">7:00 pm</td>
</tr>
<tr class="times">
<td class="times">8:00 pm</td>
</tr>
<tr class="times">
<td class="times">9:00 pm</td>
</tr>
<tr class="times">
<td class="times">10:00 pm</td>
</tr>
<tr class="times">
<td class="times">11:00 pm</td>
</tr>
</table>
</div>
<div class="grid-outer">
<div class="grid-container">
<table class="calendarbody">
<tr class="scbldr-head">
<th class="scbldr">Monday</th>
<th class="scbldr">Tuesday</th>
<th class="scbldr">Wednesday</th>
<th class="scbldr">Thursday</th>
<th class="scbldr">Friday</th>
<th class="scbldr">Saturday</th>
</tr>
<tr class="scbldr even">
<td class="scbldr" id="scbldr-mon-even"></td>
<td class="scbldr" id="scbldr-tue-even"></td>
<td class="scbldr" id="scbldr-wed-even"></td>
<td class="scbldr" id="scbldr-thu-even"></td>
<td class="scbldr" id="scbldr-fri-even"></td>
<td class="scbldr" id="scbldr-sat-even"></td>
</tr>
<tr class="scbldr odd">
<td class="scbldr" id="scbldr-mon-odd"></td>
<td class="scbldr" id="scbldr-tue-odd"></td>
<td class="scbldr" id="scbldr-wed-odd"></td>
<td class="scbldr" id="scbldr-thu-odd"></td>
<td class="scbldr" id="scbldr-fri-odd"></td>
<td class="scbldr" id="scbldr-sat-odd"></td>
</tr>
<tr class="scbldr even">
<td class="scbldr" id="scbldr-mon-even"></td>
<td class="scbldr" id="scbldr-tue-even"></td>
<td class="scbldr" id="scbldr-wed-even"></td>
<td class="scbldr" id="scbldr-thu-even"></td>
<td class="scbldr" id="scbldr-fri-even"></td>
<td class="scbldr" id="scbldr-sat-even"></td>
</tr>
<tr class="scbldr odd">
<td class="scbldr" id="scbldr-mon-odd"></td>
<td class="scbldr" id="scbldr-tue-odd"></td>
<td class="scbldr" id="scbldr-wed-odd"></td>
<td class="scbldr" id="scbldr-thu-odd"></td>
<td class="scbldr" id="scbldr-fri-odd"></td>
<td class="scbldr" id="scbldr-sat-odd"></td>
</tr>
<tr class="scbldr even">
<td class="scbldr" id="scbldr-mon-even"></td>
<td class="scbldr" id="scbldr-tue-even"></td>
<td class="scbldr" id="scbldr-wed-even"></td>
<td class="scbldr" id="scbldr-thu-even"></td>
<td class="scbldr" id="scbldr-fri-even"></td>
<td class="scbldr" id="scbldr-sat-even"></td>
</tr>
<tr class="scbldr odd">
<td class="scbldr" id="scbldr-mon-odd"></td>
<td class="scbldr" id="scbldr-tue-odd"></td>
<td class="scbldr" id="scbldr-wed-odd"></td>
<td class="scbldr" id="scbldr-thu-odd"></td>
<td class="scbldr" id="scbldr-fri-odd"></td>
<td class="scbldr" id="scbldr-sat-odd"></td>
</tr>
<tr class="scbldr even">
<td class="scbldr" id="scbldr-mon-even"></td>
<td class="scbldr" id="scbldr-tue-even"></td>
<td class="scbldr" id="scbldr-wed-even"></td>
<td class="scbldr" id="scbldr-thu-even"></td>
<td class="scbldr" id="scbldr-fri-even"></td>
<td class="scbldr" id="scbldr-sat-even"></td>
</tr>
<tr class="scbldr odd">
<td class="scbldr" id="scbldr-mon-odd"></td>
<td class="scbldr" id="scbldr-tue-odd"></td>
<td class="scbldr" id="scbldr-wed-odd"></td>
<td class="scbldr" id="scbldr-thu-odd"></td>
<td class="scbldr" id="scbldr-fri-odd"></td>
<td class="scbldr" id="scbldr-sat-odd"></td>
</tr>
<tr class="scbldr even">
<td class="scbldr" id="scbldr-mon-even"></td>
<td class="scbldr" id="scbldr-tue-even"></td>
<td class="scbldr" id="scbldr-wed-even"></td>
<td class="scbldr" id="scbldr-thu-even"></td>
<td class="scbldr" id="scbldr-fri-even"></td>
<td class="scbldr" id="scbldr-sat-even"></td>
</tr>
<tr class="scbldr odd">
<td class="scbldr" id="scbldr-mon-odd"></td>
<td class="scbldr" id="scbldr-tue-odd"></td>
<td class="scbldr" id="scbldr-wed-odd"></td>
<td class="scbldr" id="scbldr-thu-odd"></td>
<td class="scbldr" id="scbldr-fri-odd"></td>
<td class="scbldr" id="scbldr-sat-odd"></td>
</tr>
<tr class="scbldr even">
<td class="scbldr" id="scbldr-mon-even"></td>
<td class="scbldr" id="scbldr-tue-even"></td>
<td class="scbldr" id="scbldr-wed-even"></td>
<td class="scbldr" id="scbldr-thu-even"></td>
<td class="scbldr" id="scbldr-fri-even"></td>
<td class="scbldr" id="scbldr-sat-even"></td>
</tr>
<tr class="scbldr odd">
<td class="scbldr" id="scbldr-mon-odd"></td>
<td class="scbldr" id="scbldr-tue-odd"></td>
<td class="scbldr" id="scbldr-wed-odd"></td>
<td class="scbldr" id="scbldr-thu-odd"></td>
<td class="scbldr" id="scbldr-fri-odd"></td>
<td class="scbldr" id="scbldr-sat-odd"></td>
</tr>
<tr class="scbldr even">
<td class="scbldr" id="scbldr-mon-even"></td>
<td class="scbldr" id="scbldr-tue-even"></td>
<td class="scbldr" id="scbldr-wed-even"></td>
<td class="scbldr" id="scbldr-thu-even"></td>
<td class="scbldr" id="scbldr-fri-even"></td>
<td class="scbldr" id="scbldr-sat-even"></td>
</tr>
<tr class="scbldr odd">
<td class="scbldr" id="scbldr-mon-odd"></td>
<td class="scbldr" id="scbldr-tue-odd"></td>
<td class="scbldr" id="scbldr-wed-odd"></td>
<td class="scbldr" id="scbldr-thu-odd"></td>
<td class="scbldr" id="scbldr-fri-odd"></td>
<td class="scbldr" id="scbldr-sat-odd"></td>
</tr>
<tr class="scbldr even">
<td class="scbldr" id="scbldr-mon-even"></td>
<td class="scbldr" id="scbldr-tue-even"></td>
<td class="scbldr" id="scbldr-wed-even"></td>
<td class="scbldr" id="scbldr-thu-even"></td>
<td class="scbldr" id="scbldr-fri-even"></td>
<td class="scbldr" id="scbldr-sat-even"></td>
</tr>
<tr class="scbldr odd">
<td class="scbldr" id="scbldr-mon-odd"></td>
<td class="scbldr" id="scbldr-tue-odd"></td>
<td class="scbldr" id="scbldr-wed-odd"></td>
<td class="scbldr" id="scbldr-thu-odd"></td>
<td class="scbldr" id="scbldr-fri-odd"></td>
<td class="scbldr" id="scbldr-sat-odd"></td>
</tr>
<tr class="scbldr even">
<td class="scbldr" id="scbldr-mon-even"></td>
<td class="scbldr" id="scbldr-tue-even"></td>
<td class="scbldr" id="scbldr-wed-even"></td>
<td class="scbldr" id="scbldr-thu-even"></td>
<td class="scbldr" id="scbldr-fri-even"></td>
<td class="scbldr" id="scbldr-sat-even"></td>
</tr>
<tr class="scbldr odd">
<td class="scbldr" id="scbldr-mon-odd"></td>
<td class="scbldr" id="scbldr-tue-odd"></td>
<td class="scbldr" id="scbldr-wed-odd"></td>
<td class="scbldr" id="scbldr-thu-odd"></td>
<td class="scbldr" id="scbldr-fri-odd"></td>
<td class="scbldr" id="scbldr-sat-odd"></td>
</tr>
<tr class="scbldr even">
<td class="scbldr" id="scbldr-mon-even"></td>
<td class="scbldr" id="scbldr-tue-even"></td>
<td class="scbldr" id="scbldr-wed-even"></td>
<td class="scbldr" id="scbldr-thu-even"></td>
<td class="scbldr" id="scbldr-fri-even"></td>
<td class="scbldr" id="scbldr-sat-even"></td>
</tr>
<tr class="scbldr odd">
<td class="scbldr" id="scbldr-mon-odd"></td>
<td class="scbldr" id="scbldr-tue-odd"></td>
<td class="scbldr" id="scbldr-wed-odd"></td>
<td class="scbldr" id="scbldr-thu-odd"></td>
<td class="scbldr" id="scbldr-fri-odd"></td>
<td class="scbldr" id="scbldr-sat-odd"></td>
</tr>
<tr class="scbldr even">
<td class="scbldr" id="scbldr-mon-even"></td>
<td class="scbldr" id="scbldr-tue-even"></td>
<td class="scbldr" id="scbldr-wed-even"></td>
<td class="scbldr" id="scbldr-thu-even"></td>
<td class="scbldr" id="scbldr-fri-even"></td>
<td class="scbldr" id="scbldr-sat-even"></td>
</tr>
<tr class="scbldr odd">
<td class="scbldr" id="scbldr-mon-odd"></td>
<td class="scbldr" id="scbldr-tue-odd"></td>
<td class="scbldr" id="scbldr-wed-odd"></td>
<td class="scbldr" id="scbldr-thu-odd"></td>
<td class="scbldr" id="scbldr-fri-odd"></td>
<td class="scbldr" id="scbldr-sat-odd"></td>
</tr>
<tr class="scbldr even">
<td class="scbldr" id="scbldr-mon-even"></td>
<td class="scbldr" id="scbldr-tue-even"></td>
<td class="scbldr" id="scbldr-wed-even"></td>
<td class="scbldr" id="scbldr-thu-even"></td>
<td class="scbldr" id="scbldr-fri-even"></td>
<td class="scbldr" id="scbldr-sat-even"></td>
</tr>
<tr class="scbldr odd">
<td class="scbldr" id="scbldr-mon-odd"></td>
<td class="scbldr" id="scbldr-tue-odd"></td>
<td class="scbldr" id="scbldr-wed-odd"></td>
<td class="scbldr" id="scbldr-thu-odd"></td>
<td class="scbldr" id="scbldr-fri-odd"></td>
<td class="scbldr" id="scbldr-sat-odd"></td>
</tr>
<tr class="scbldr even">
<td class="scbldr" id="scbldr-mon-even"></td>
<td class="scbldr" id="scbldr-tue-even"></td>
<td class="scbldr" id="scbldr-wed-even"></td>
<td class="scbldr" id="scbldr-thu-even"></td>
<td class="scbldr" id="scbldr-fri-even"></td>
<td class="scbldr" id="scbldr-sat-even"></td>
</tr>
<tr class="scbldr odd">
<td class="scbldr" id="scbldr-mon-odd"></td>
<td class="scbldr" id="scbldr-tue-odd"></td>
<td class="scbldr" id="scbldr-wed-odd"></td>
<td class="scbldr" id="scbldr-thu-odd"></td>
<td class="scbldr" id="scbldr-fri-odd"></td>
<td class="scbldr" id="scbldr-sat-odd"></td>
</tr>
<tr class="scbldr even">
<td class="scbldr" id="scbldr-mon-even"></td>
<td class="scbldr" id="scbldr-tue-even"></td>
<td class="scbldr" id="scbldr-wed-even"></td>
<td class="scbldr" id="scbldr-thu-even"></td>
<td class="scbldr" id="scbldr-fri-even"></td>
<td class="scbldr" id="scbldr-sat-even"></td>
</tr>
<tr class="scbldr odd">
<td class="scbldr" id="scbldr-mon-odd"></td>
<td class="scbldr" id="scbldr-tue-odd"></td>
<td class="scbldr" id="scbldr-wed-odd"></td>
<td class="scbldr" id="scbldr-thu-odd"></td>
<td class="scbldr" id="scbldr-fri-odd"></td>
<td class="scbldr" id="scbldr-sat-odd"></td>
</tr>
<tr class="scbldr even">
<td class="scbldr" id="scbldr-mon-even"></td>
<td class="scbldr" id="scbldr-tue-even"></td>
<td class="scbldr" id="scbldr-wed-even"></td>
<td class="scbldr" id="scbldr-thu-even"></td>
<td class="scbldr" id="scbldr-fri-even"></td>
<td class="scbldr" id="scbldr-sat-even"></td>
</tr>
<tr class="scbldr odd">
<td class="scbldr" id="scbldr-mon-odd"></td>
<td class="scbldr" id="scbldr-tue-odd"></td>
<td class="scbldr" id="scbldr-wed-odd"></td>
<td class="scbldr" id="scbldr-thu-odd"></td>
<td class="scbldr" id="scbldr-fri-odd"></td>
<td class="scbldr" id="scbldr-sat-odd"></td>
</tr>
<tr class="scbldr even">
<td class="scbldr" id="scbldr-mon-even"></td>
<td class="scbldr" id="scbldr-tue-even"></td>
<td class="scbldr" id="scbldr-wed-even"></td>
<td class="scbldr" id="scbldr-thu-even"></td>
<td class="scbldr" id="scbldr-fri-even"></td>
<td class="scbldr" id="scbldr-sat-even"></td>
</tr>
<tr class="scbldr odd">
<td class="scbldr" id="scbldr-mon-odd"></td>
<td class="scbldr" id="scbldr-tue-odd"></td>
<td class="scbldr" id="scbldr-wed-odd"></td>
<td class="scbldr" id="scbldr-thu-odd"></td>
<td class="scbldr" id="scbldr-fri-odd"></td>
<td class="scbldr" id="scbldr-sat-odd"></td>
</tr>
<tr class="scbldr even">
<td class="scbldr" id="scbldr-mon-even"></td>
<td class="scbldr" id="scbldr-tue-even"></td>
<td class="scbldr" id="scbldr-wed-even"></td>
<td class="scbldr" id="scbldr-thu-even"></td>
<td class="scbldr" id="scbldr-fri-even"></td>
<td class="scbldr" id="scbldr-sat-even"></td>
</tr>
<tr class="scbldr odd">
<td class="scbldr" id="scbldr-mon-odd"></td>
<td class="scbldr" id="scbldr-tue-odd"></td>
<td class="scbldr" id="scbldr-wed-odd"></td>
<td class="scbldr" id="scbldr-thu-odd"></td>
<td class="scbldr" id="scbldr-fri-odd"></td>
<td class="scbldr" id="scbldr-sat-odd"></td>
</tr>
</table>
<div class="events-container">
<table class="events-grid">
<tr class="events-row">
<td class="ev mon" id="evmon">
<div class="event ev1" id="event1" style="height:90px; top:400px"></div>
</td>
<td class="ev tue" id="evtue">
<div class="event ev2" id="event2" style="height:142px; top:200px"></div>
</td>
<td class="ev wed" id="evwed">
<!-- <div class="event ev3" id="event3" style="height:100px; top:174.6px"></div> -->
</td>
<td class="ev thu" id="evthu">
<!-- <div class="event ev4" id="event4" style="height:121.12px; top:60px"></div> -->
</td>
<td class="ev fri" id="evfri">
<!-- <div class="event ev5" id="event5" style="height:200px; top:24px"></div> -->
</td>
<td class="ev sat" id="evsat">
<!-- <div class="event ev6" id="event6" style="height:97px; top:89px"></div> -->
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="col-xs-6 col-sm-4 col-lg-2">
<div class="rightSchedule" id="scheduleList">
<p class="text-center">Your Schedule</p>
<div class="listSchedule" id="listBtn"></div>
<select id="schedulesDrop" name="schedules">"<option value="0">1</option><br><option value="1">2</option><br/></br></select></div>
</div>
</div>
<!--
    <script src="static/assets/js/jquery-3.2.1.js"></script>
    <script src="static/assets/js/script.js"></script>
		-->
<script src="../static/assets/js/jquery-3.2.1.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script><!--
    <script src="../static/assets/js/script.js"></script>
  -->
<script>
    var schedule
		$(document).ready(function(){
      $('select#schedulesDrop').change(function() {
        $.ajax({
          url : '/selectSchedule',
          method : "GET",
          data : {
            i : dbid,
            s : $('select#schedulesDrop').val()
          },
          success : function(data){
            //This is the code that generates the the div events on the calendar
            schedule = JSON.parse(data); //JSON string
            populateCalendar(schedule);
            console.log("success");
          },
          error : function(){
            console.log("fail!")
          }
        });
      });

	    $.ajax({
        url : '/selectSchedule',
        method : "GET",
        data : {
          i : dbid,
          s : $('select#schedulesDrop').val()
        },
        success : function(data){
          //This is the code that generates the the div events on the calendar
          schedule = JSON.parse(data); //JSON string
          populateCalendar(schedule);
          console.log("success");
        },
        error : function(){
          console.log("fail!")
        }
      });
    });
    function populateCalendar(schedule){
      var days = {'MO':"evmon", 'TU':"evtue", 'WE':"evwed", 'TH':"evthu", 'FR':"evfri", 'SA':"evsat"};
      for (day in days) {
        eventCol = document.getElementById(days[day]);
        while (eventCol.hasChildNodes()){
          eventCol.removeChild(eventCol.childNodes[0]);
        }
      }
      i = 1;
      for (course in schedule) {
        for (meeting in schedule[course]["section"]["meetings"]) {
          var div = '<div class="event ev'+String(i)+'" id="event'+String(i)+'"style="height:'+String(calculateDuration(schedule[course]["section"]["meetings"][meeting]['startTime'],schedule[course]["section"]["meetings"][meeting]['endTime']))+'px; top:'+String(calculateStart(schedule[course]["section"]["meetings"][meeting]['startTime'])-220)+'px"></div>'
          for (recurr in schedule[course]["section"]["meetings"][meeting]["recurrence"]){
            console.log(days[schedule[course]["section"]["meetings"][meeting]["recurrence"][recurr]]);
            $('#'+days[schedule[course]["section"]["meetings"][meeting]["recurrence"][recurr]]).append(div)
          }
        }
      i++;
      }
    }

    function calculateDuration(starttime,endtime){
      var conversion = 40;
      var startStr = starttime.split(":");
      var endStr = endtime.split(":");
      var duration = [0,0];
      duration[1] = parseInt(endStr[1])-parseInt(startStr[1])
      if (duration[1]<0){
        duration[1]+=60;
        duration[0]--;
      }
      duration[0] += parseInt(endStr[0])-parseInt(startStr[0]);
      return (duration[0]*conversion+(duration[1]/60)*conversion);
    }

    function calculateStart(starttime){
      conversion = 40;
      var startStr = starttime.split(":");
      start = [parseInt(startStr[0]),parseInt(startStr[1])]
      return (start[0]*conversion+(start[1]/60)*conversion);
    }

	</script>
<script>var dbid=236</script></body>
</html>